"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var RankingListController=function(){function e(){_classCallCheck(this,e),this.listRanking=[]}return _createClass(e,[{key:"getRankingList",value:function(t){var n=new XMLHttpRequest;n.open("GET","/fazenda.json"),n.setRequestHeader("Content-type","text/html; charset=utf-8"),n.onload=function(){if(200==n.status){var e=JSON.parse(n.responseText);t(e)}else console.error("erro ao buscar lista de ranking")},n.send()}},{key:"showRanking",value:function(){var r=this;this.getRankingList(function(e){for(var t=0;t<e.data.length;t++){var n=e.data[t],i=new ItemRanking(n.__id,n.name,n.description,n.picture,n.positive,n.negative);r.listRanking.push(i)}new MainView(r.listRanking).populeRankingList()})}}]),e}(),ItemRanking=function(){function o(e,t,n,i,r,a){_classCallCheck(this,o),this._id=e,this._name=t,this._description=n,this._picture=i,this._positive=r,this._negative=a}return _createClass(o,[{key:"getPositivePercent",value:function(){if(null==this._positive||null==this._negative)return 0;var e=parseFloat(this._positive)+parseFloat(this._negative);return(100*this._positive/e).toFixed(0)}},{key:"getNegativePercent",value:function(){if(null==this._positive||null==this._negative)return 0;var e=parseFloat(this._positive)+parseFloat(this._negative);return(100*this._negative/e).toFixed(0)}},{key:"name",get:function(){return this._name}},{key:"picture",get:function(){return this._picture}},{key:"description",get:function(){return unescape(decodeURIComponent(this._description))}}]),o}();[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})});var MainView=function(){function t(e){_classCallCheck(this,t),this._listItemRanking=e,this.listRanking=null,this.itemRankingElement=null,this.mounted()}return _createClass(t,[{key:"createNewItem",value:function(e,t){if(this.itemRankingElement){var n=this.itemRankingElement.cloneNode(!0),i=(n.querySelector(".position-circle"),n.querySelector(".ranking-picture")),r=n.querySelector(".ranking-name"),a=n.querySelector(".ranking-description"),o=n.querySelector(".tooltip-side.like .percent"),s=n.querySelector(".tooltip-side.nolike .percent");return i.style.backgroundImage="url('"+e.picture+"')",r.textContent=e.name,a.innerHTML=e.description,o.textContent=e.getPositivePercent()+"%",s.textContent=e.getNegativePercent()+"%",e.getPositivePercent()>e.getNegativePercent()?o.parentNode.parentNode.classList.add("most"):s.parentNode.parentNode.classList.add("most"),n}}},{key:"populeRankingList",value:function(){var n=this;if(console.log("ola mundo"),this.listRanking)this._listItemRanking.map(function(e,t){return n.createNewItem(e,t)}).sort(function(e,t){var n=e.querySelector(".tooltip-side.like .percent").textContent.replace("%",""),i=t.querySelector(".tooltip-side.like .percent").textContent.replace("%","");return i<n?-1:n<i?1:0}).map(function(e,t){e.querySelector(".position-circle").textContent=t+1,e.tabIndex=t+1,t%2&&e.classList.add("background-gray"),n.listRanking.appendChild(e)})}},{key:"mounted",value:function(){this.listRanking=document.querySelector("#list-ranking");var e=this.listRanking.getElementsByClassName("item-ranking")[0];e&&(this.itemRankingElement=e.cloneNode(!0),e.remove())}}]),t}();